export const ASPECTS = {
  base11: "1:1",
  base169: "16:9",
  base916: "9:16",
  base219: "21:9",
  base921: "9:21",
  base23: "2:3",
  base32: "3:2",
  base25: "2:5",
  base52: "5:2",
};

export const MJARGUMENTS = {
  base: "",
  basehd: "--hd",
  basevibe: "--vibe",
  basevibefast: "--vibefast",
  basetest: "--test",
  basestop80: "--stop 80",
  basestop70: "--stop 70",
  basestop60: "--stop 60",
  basestop50: "--stop 50",
};

export const BASEMODIFICATIONS = {
  baseart: "Utah Teapot, digital art --ar 16:9",
  basephoto: "a photo of a Utah Teapot --ar 16:9",
  basemade: "Utah Teapot made of --ar 16:9",
};

export const PHYSICALMEDIUMS = {
  physicalmediums: {
    base: "",
    illustration: "illustration",
    sketch: "sketch",
    oilPainting: "oil Painting",
    glassPaint: "glass Paint",
    charcoal: "charcoal",
    watercolor: "watercolor",
    chalk: "chalk",
    tempera: "tempera",
    pastel: "pastel",
    inkPen: "Ink and Pen",
    graphitePencil: "graphite Pencil",
    colorPencil: "color Pencil",
    goache: "goache",
    acrylic: "acrylic",
    conte: "conte",
    marker: "marker",
    glaze: "glaze",
    crayon: "crayon",
    latex: "latex",
    glitter: "glitter",
    sprayPaint: "sprayPaint",
    latte2: "Latte Art",
    illumanu: "Illuminated Manuscript",
    blueprint2: "blueprint",
    concept: "concept",
    storyboard: "storyboard",
    collage: "collage",
    block: "Block Printing",
    line: "Line Art",
    prop: "Propaganda Poster",
    sears: "Sears Catalog",
    prod: "Product Photo",
    elecPhoto: "Election Photo",
    elecPoster: "Election Poster",
    screen: "Screen Painting",
    mono: "Mono Printing",
    foundobj: "Found Objects",
    etching: "etching",
    litho: "Lithography",
    installation: "Installation Art",
    airbrush: "airbrush",
    anatomical: "Anatomical Drawing",
    calligraphy: "calligraphy",
    inkpainting: "inkpainting",
    scroll: "scroll",
    tattoo: "tattoo",
    applique: "applique",
    enameled: "enameled",
    jewelry: "jewelry",
    azulejo: "azulejo",
    stamp: "stamp",
    goldleaf: "goldleaf",
    lacquer: "lacquer",
    scientificdiagram: "Scientific Diagram",
    magazine: "magazine",
    ad: "Advertisement",
    postage: "postage",
    woodblock: "Wood Block Print",
    newspaper: "Newspaper",
    isotype: "Isotype",
  },

  fabricmediums: {
    quilt: "quilt",
    lace: "lace",
    embroidery: "embroidery",
    macrame: "macrame",
    knitted: "knitted",
    rug: "rug",
    weave: "weave",
    felted: "felted",
    crochet: "crochet",
    crossstitch: "cross stitch",
    crewl: "crewl",
    needlepoint: "needlepoint",
    patch: "patch",
  },

  photographicmediums: {
    stopmotion: "stopmotion",
    photoshoot: "photoshoot",
    gopro: "gopro",
    trailcam: "trailcam",
    dashcam: "dashcam",
  },

  digitalmediums: {
    digitalArt: "digitalArt",
    pixel2: "pixel Art",
    anime: "anime",
    texture: "texture",
    fractal: "fractal",
    algo: "Algorithmic",
    datamosh: "Data Moshing",
    dynamic: "Dynamic Painting",
    _3dmodel: "3D Model",
    logo: "logo",
    icon: "icon",
    digitalphotography: "Digital Photography",
    vector: "Vector Art",
    tilemap: "tilemap",
    mspaint: "Microsoft Paint",
    raster: "Raster Art",
    geometric: "geometric",
    photoshop: "photoshop",
    isometric: "isometric",
    depthmap: "Depth Map",
    animation: "animation",
    wireframe: "Wireframe",
  },
};

export const MATERIALS = {
  materials: {
    wood: "Wood",
    glass: "Glass",
    stainedGlass: "Stained Glass",
    concrete: "Concrete",
    metal: "Metal",
    boneChina: "Bone China",
    porcelain: "Porcelain",
    flowers: "Flowers",
    pottery: "Pottery",
    paper: "Paper",
    stone: "Stone",
    marble: "Marble",
    fruit: "Fruit",
    bronze: "Bronze",
    plastic: "Plastic",
    water: "Water",
    yarn: "Yarn",
    ice: "Ice",
    wax: "Wax",
    ivory: "Ivory",
    soysauce: "Soysauce",
    vegetation: "Vegetation",
    tile: "Tile",
    pewter: "Pewter",
    origami: "Origami",
    styrofoam: "Styrofoam",
  },
};

export const STYLES = {

    renderers: {
        mentalray: "MentalRay",
        opengl: "OpenGL",
        directx: "DirectX",
        luxcore: "Luxcore",
        infinid: "Infini-D",
        zbrush: "Z-Brush",
        blender: "Blender",
        vray: "V-Ray",
        cryengine: "CryEngine",
        optix: "Optix",
        raylectron: "Raylectron",
        cinema4d: "Cinema4D",
        houdini: "Houdini",
        cycles: "Cycles",
        octane: "Octane",
        unreal: "Unreal",
        unity: "Unity",
    },
    photosites: {
        trendingpixiv: "Trending On Pixiv",
        pixiv: "Pixiv",
        trendingartstation: "Trending On Artstation",
        artstation: "Artstation",
    },
    abstraction: {
        
abstract: "Abstract",
americanrealism: "American Realism",
classicalrealism: "Classical Realism",
dreamlike: "Dreamlike",
ethereal: "Ethereal",
fantasyrealism: "Fantasy Realism",
hyperrealistic: "Hyperrealistic",
impossible: "Impossible",
lucid: "Lucid",
lyricalabstraction: "Lyrical Abstraction",
newrealism: "New Realism",
otherworldly: "Otherworldly",
realism: "Realism",
realistic: "Realistic",
socialistrealism: "Socialist Realism",
surreal: "Surreal"
    },
    timeframes: {
        _2020s: "2020s",
        _2010s: "2010s",
        _2000s: "2000s",
        _1990s: "1990s",
        _1980s: "1980s",
        _1970s: "1970s",
        _1960s: "1960s",
        _1950s: "1950s",
        _1940s: "1940s",
        _1930s: "1930s",
        _1920s: "1920s",
        _1910s: "1910s",
        _1900s: "1900s",
        _1850s: "1850s",
        _1800s: "1800s",
        _1750s: "1750s",
        _1700s: "1700s",
        _1600s: "1600s",
        _1500s: "1500s",
        _1400s: "1400s",
        _1300s: "1300s",
        _1200s: "1200s",
        _1100s: "1100s",
        _1000s: "1000s",
    },
  punkstyles: {
    steampunk: "Steampunk",
    cyberpunk: "Cyberpunk",
    solarpunk: "Solarpunk",
    steelpunk: "Steelpunk",
    bronzepunk: "Bronzepunk",
    dieselpunk: "Dieselpunk",
    piedieselpunk: "Piecraftian dieselpunk",
    ottodieselpunk: "Ottensian dieselpunk",
    decopunk: "Decopunk",
    atompunk: "Atompunk",
    biopunk: "Biopunk",
    cuberpunk: "Cuberpunk",
    postcyberpunk: "Postcyberpunk",
    cybernoir: "Cybernoir",
    clockpunk: "Clockpunk",
    formicapunk: "Formicapunk",
  },

  wavestyles: {
    synthwave: "Synthwave",
    vaporwave: "Vaporwave",
    retrowave: "Retrowave",
    futurefunk: "Futurefunk",
    outrun: "Outrun",
  },
};

export const CAMERA = {
resolution: {
    _4k: "4k",
    _8k: "8k",
    _16k: "16k",
},
perspectives: {
    lowangle: "Low Angle",
highangle: "High Angle",
closeup: "Close Up",
mediumshot: "Medium Shot",
longshot: "Long Shot",
overtheshoulder: "Over the Shoulder",
ecloseup: "Extreme closeup",
elongshot: "Extreme longshot",
birdseye: "Bird's Eye",
tiltangle: "Tilt Angle",
dutchangle: "Dutch Angle",
establishingshot: "Establishing Shot",
dynamicperspective: "Dynamic Perspective",
macro: "Macro View",
magnification: "Magnification",
telephoto: "Telephoto",
}



}
export const POSTPROCESSING = {
postprocessing: {
    aliasing: "Aliasing",
occlusion: "Occlusion",
exposure: "Exposure",
bloom: "Bloom",
chromatic: "Chromatic Abberation",
fog: "Fog",
dof: "Depth of Field",
grain: "Grain",
distortion: "Distortion",
mblur: "Motion Blur",
panini: "Panini",
vignette: "Vignette",
ray: "Ray tracing",
rayocc: "Ray tracing with occlusion",
shaders: "Shaders",
postprocess: "Post processing effects",
cel: "Cel shading",
},

reflections: {
    refray: "Reflection ray tracing",
reflumen: "Reflection lumen mapping",
refscreen: "Reflection screen space mapping",
},

misc: {
    hdr: "High dynamic range",
cinematic: "Cinematic"
}

};

export const LDD = {
lighting: {
    diyalamp: "Diyalamp",
lantern: "Lantern",
christmaslight: "Christmaslight",
nightlight: "Nightlight",
opticalfiber: "Opticalfiber",
electroluminescentwire: "Electroluminescentwire",
ultraviolet: "Ultraviolet",
infrared: "Infrared",
laser: "Laser",
xray: "Xray",
argadlamp: "Argadlamp",
halfrearlighting: "Halfrearlighting",
floodlight: "Floodlight",
marquee: "Marquee",
strobelight: "Strobelight",
bright: "Bright",
crepuscularrays: "Crepuscularrays",
raysofshimmeringlight: "Raysofshimmeringlight",
incandescent: "Incandescent",
fluorescent: "Fluorescent",
plasmaglobe: "Plasmaglobe",
teslacoil: "Teslacoil",
electricarc: "Electricarc",
crackletube: "Crackletube",
edisonbulb: "Edisonbulb",
vacuumtube: "Vacuumtube",
nixietube: "Nixietube",
halogen: "Halogen",
neon: "Neon",
xenon: "Xenon",
krypton: "Krypton"
}


};

export const ARTISTS = {
    Academism: {
        alexandrecabanel: "Alexandre Cabanel",
    },

    ArtsandCrafts:
    {
        carllarsson: "Carl Larsson",
    },

    ArtNouveau:
    {
        alphonsomucha: "Alphonso Mucha"
    },

    Baroque:
    {
        annibalecarracci: "Annibale Carracci",
        anthonyvandyck: "Anthony van Dyck",
        artemisiagentileschi: "Artemisia Gentileschi",
        caravaggio: "Caravaggio",
        claudelorrain: "Claude Lorrain",
    },

    Bauhaus:
    {
        bauhaus: "Bauhaus",
    },
    BayArea:
    {
        annadittmann: "Anna Dittmann",
    },
    Environmentalism:
    {
        anseladams: "Ansel Adams",
    },
    Expressionism:
    {
        affadi: "Affadi",
alexejvonjawlensky: "Alexej von Jawlensky",
alfredkubin: "Alfred Kubin",
aliceneel: "Alice Neel",
arshilegorky: "Arshile Gorky",
beeple: "Beeple",
bernardbuffet: "Bernard Buffet",
chaimsoutine: "Chaim Soutine",
cunoamiet: "Cuno Amiet",
    },
    Gothic:
    {
        albrechtdurer: "Albrecht Dürer",
    },

    Impressionist:
    {
        impressionist: "Impressionist",
camillecorot: "Camille Corot",
camillepissarro: "Camille Pissarro",
childehassam: "Childe Hassam",
claudemonet: "Claude Monet",
    },
    InstallationArt:
    {
        chiharushiota: "Chiharu Shiota",
    },

    Luminism:
    {
        albertbierstadt: "Albert Bierstadt",
    },

    Modernism:
    {
        agneslawrence: "Agnes Lawrence",
amedeomodigliani: "Amedeo Modigliani",
arthurdove: "Arthur Dove",
beauforddelaney: "Beauford Delaney",
candidoportinari: "Candido Portinari",
    },

    Photorealism:
    {
        cindysherman: "Cindy Sherman",
    },

    PostImpressionist:
    {
        vangogh: "Vincent van Gogh",
bonnardpierre: "Pierre Bonnard"
    },
    PopArt:
    {
        andyworhol: "Andy Warhol",
        albertovargas: "Alberto Vargas",
    },
    Postmodern:
    {
        alexgrey: "Alex Grey",
        amandasage: "Amanda Sage",
    },
    Realist:
    {
        adolphmenzel: "Adolph Menzel",
        alexeisavrasov: "Alexei Savrasov",
        andrewwyeth: "Andrew Wyeth",
        arkhipkuindzhi: "Arkhip Kuindzhi",
        clivemadgwick: "Clive Madgwick"
    },
    Romantisism:
    {
        bobross: "Bob Ross",
    },
    ScienceFiction:
    {
        bastienlecouffedeharme: "Bastien Lecouffe Deharme",
barclayshaw: "Barclay Shaw",
bobeggleton: "Bob Eggleton",
borisvallejo: "Boris Vallejo",
brothershildebrandt: "Brothers Hildebrandt",
brucepennington: "Bruce Pennington",
chesleybonestell: "Chesley Bonestell",
chrisfoss: "Chris Foss",
chrismoore: "Chris Moore",
    },
    StreetArt:
    {
        banksy: "Banksy"
    },
    Surrealist:
    {
        surrealist: "Surrealist",
salvadordali: "Salvador Dali",
andremasson: "André Masson",
bridgetbatetichenor: "Bridget Batetičhenor",
camillepierrepambubodo: "Camille Pierrepambubodo",
chrismars: "Chris Mars",
clovistrouille: "Clovis Trouille",
    },
    Symbolism:
    {
        alyssamonks: "Alyssa Monks",
        arnoldbocklin: "Arnold Böcklin",
    },
    HudsonRiver:
    {
        asherbrowndurand: "Asher Brown Durand",
    },
    VisionaryArt:
    {
        charleseburchfield: "Charles E. Burchfield"
    },




};

/*
Prompt:
vibe
vibefast
illustration
sketch
oilPainting
glassPaint

Result:
vibe: "vibe",
vibefast: "vibefast",
illustration: "illustration",
sketch: "sketch",
oilPainting: "oilPainting",
glassPaint: "glassPaint"




@page "/ptocalendar"
@page "/illinois/ptocalendar"
@page "/wisconsin/ptocalendar"

@layout GeneralLayout

@inherits SightGlassComponentBase

@inject IJSRuntime _jsRuntime
@inject VistaTimeService _vistaTimeService


@using Syncfusion.Blazor.Schedule
@using Marquis.Services.SightGlass
@using Marquis.Data.SightGlass
@using Marquis.Services.SightGlass.Models
@using Blazored.LocalStorage
@using Marquis.Shared
@inject ILocalStorageService LocalStorageService
@attribute [Authorize]

<Subheader PageTitle="PTO Calendar">

    @if (Facility != null)
    {
        <BreadcrumbLink Href="@($"/{Facility.Path}")" Text="@($"{Facility.ShortName}")" />
        <BreadcrumbLink Href="@($"/{Facility.Path}/ptocalendar")" Text="PTO Calendar" />     
    }
    else
    {
        <BreadcrumbLink Href="/ptocalendar" Text="PTO Calendar" />  
        
    }
</Subheader>

<PageBody>
    @if (Facility.AppFacilityId == AppFacilityIdentifiers.Illinois)
    {
        <div class="kt-portlet">
            <div class="kt-portlet__body">

                <EditForm Model="@MyCalendarForm">
                    <div>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMelc" @onclick="@(() => { MyCalendarForm.IsMelc = !MyCalendarForm.IsMelc; DoFilter(); })"/>
                            Energy
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMgra" @onclick="@(() => { MyCalendarForm.IsMgra = !MyCalendarForm.IsMgra; DoFilter(); })"/>
                            Grain
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMinc" @onclick="@(() => { MyCalendarForm.IsMinc = !MyCalendarForm.IsMinc; DoFilter(); })"/>
                            Inc
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMgmt" @onclick="@(() => { MyCalendarForm.IsMgmt = !MyCalendarForm.IsMgmt; DoFilter(); })"/>
                            Management
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMmar" @onclick="@(() => { MyCalendarForm.IsMmar = !MyCalendarForm.IsMmar; DoFilter(); })"/>
                            Marine
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMrol" @onclick="@(() => { MyCalendarForm.IsMrol = !MyCalendarForm.IsMrol; DoFilter(); })"/>
                            Renewable Oils
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMewi" @onclick="@(() => { MyCalendarForm.IsMewi = !MyCalendarForm.IsMewi; DoFilter(); })"/>
                            Wisconsin
                        </label>
                        <label class="mr-3 mb-0">
                            <input type="checkbox" checked="@MyCalendarForm.IsMext" @onclick="@(() => { MyCalendarForm.IsMext = !MyCalendarForm.IsMext; DoFilter(); })"/>
                            XT
                        </label>
                        <label class="mr-3 mb-0">
                           <input autoComplete="on" list="suggestions"
               @oninput="OnInputChanged"
               @onfocus='() => OnInputChanged(new ChangeEventArgs { Value = "" })'
               @bind-value="@MyCalendarForm.SearchTerm"
                placeholder="Search by name"
                />
                        </label>
                        
                    </div>
                </EditForm>
            </div>
        </div>
    }
    else
    {
        <div class="kt-portlet">
            <div class="kt-portlet__body">

                <EditForm Model="@MyCalendarForm">
                    <div>
                        <label class="mr-3 mb-0">
                           <input autoComplete="on" list="suggestions"
               @oninput="OnInputChanged"
               @onfocus='() => OnInputChanged(new ChangeEventArgs { Value = "" })'
               @bind-value="@MyCalendarForm.SearchTerm"
                placeholder="Search by name"
                />
                        </label>
                        
                    </div>
                </EditForm>
            </div>
        </div>
    }
                    
    @if (DoneLoading)
    {
        <div class="pto-calendar">
            <SfSchedule TValue="AppointmentData" EnableAutoRowHeight="true" @bind-SelectedDate="@_currentDate" Readonly="true">
                <ScheduleEventSettings DataSource="@_dataSource"></ScheduleEventSettings>
                <ScheduleViews>
                    <ScheduleView Option="View.Month"></ScheduleView>
                    <ScheduleView Option="View.Agenda"></ScheduleView>
                </ScheduleViews>
            </SfSchedule>
        </div>
    }
</PageBody>


@code{
    //<input autoComplete="on" type="text" @bind-value="@MyCalendarForm.SearchTerm" @bind-value:event=oninput placeholder="Search by name" @onchange="@DoFilter"/>
    private bool DoneLoading { get; set; }
    private DateTime _currentDate = DateTime.Today;
    private List<AppointmentData> _dataSource = new();
    private List<TimeClockEmployeePtoEntry> ptoEntries = new List<TimeClockEmployeePtoEntry>();


    private CalendarForm MyCalendarForm = new();

    public class CalendarForm
    {
        public bool IsMelc { get; set; }
        public bool IsMgmt { get; set; }
        public bool IsMgra { get; set; }
        public bool IsMinc { get; set; }
        public bool IsMmar { get; set; }
        public bool IsMrol { get; set; }
        public bool IsMewi { get; set; }
        public bool IsMext { get; set; }
        public string SearchTerm { get; set; } = "";
    }

    //Here's what the above function is doing:
    //1. It's getting the value of the input field and assigning it to the SearchTerm property of the MyCalendarForm object.
    //2. It's calling the DoFilter() function.
    private async void OnInputChanged(ChangeEventArgs e)
    {
        MyCalendarForm.SearchTerm = e.Value as string;
        await LocalStorageService.SetItemAsync(LocalStorageKeys.PTODATA.ToString(), MyCalendarForm);
        DoFilter();
    }


    private void DoFilter()
    {
        DoneLoading = false;

        _dataSource = new();


        var ptoEntries2 = new List<TimeClockEmployeePtoEntry>();

        if (Facility == null)
        {
            return;
        }


        if (Facility.AppFacilityId == AppFacilityIdentifiers.Illinois)
        {
            if (MyCalendarForm.IsMelc)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MELC");
                ptoEntries2.AddRange(temp);
            }
            if (MyCalendarForm.IsMgmt)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MGMT").ToList();
                ptoEntries2.AddRange(temp);
            }
            if (MyCalendarForm.IsMgra)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MGRA").ToList();
                ptoEntries2.AddRange(temp);
            }    
            if (MyCalendarForm.IsMinc)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MINC").ToList();
                ptoEntries2.AddRange(temp);
            }       
            if (MyCalendarForm.IsMmar)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MMAR").ToList();
                ptoEntries2.AddRange(temp);
            }                       
            if (MyCalendarForm.IsMrol)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MROL").ToList();
                ptoEntries2.AddRange(temp);
            } 
            if (MyCalendarForm.IsMewi)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MEWI").ToList();
                ptoEntries2.AddRange(temp);
            }   
            if (MyCalendarForm.IsMext)
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MEXT").ToList();
                ptoEntries2.AddRange(temp);
            }

            if (!MyCalendarForm.IsMelc && !MyCalendarForm.IsMgmt && !MyCalendarForm.IsMgra && !MyCalendarForm.IsMinc
                && !MyCalendarForm.IsMmar && !MyCalendarForm.IsMrol && !MyCalendarForm.IsMewi && !MyCalendarForm.IsMext)
            {
                ptoEntries2 = ptoEntries;
            }

            if (!String.IsNullOrEmpty(MyCalendarForm.SearchTerm.Trim().ToLower()))
            {
                ptoEntries2 = ptoEntries2.Where(p => p.DisplayName.ToLower().Trim().Contains(MyCalendarForm.SearchTerm.ToLower().Trim())).ToList();
            }            
        }
        if (Facility.AppFacilityId == AppFacilityIdentifiers.Wisconsin)
        {
            if (!String.IsNullOrEmpty(MyCalendarForm.SearchTerm.Trim().ToLower()))
            {
                var temp2 = ptoEntries.Where(p => p.CompanyCode == "MEWI" || 
                                                p.EmpNo 
                                                    is "1176" // Jeff Knutson
                                                    or "1086" // Bridget Neitzel
                                                    or "1196" // Howard Boppart
                                                    or "1106" // Roland Koenig
                ).ToList().Where(p => p.DisplayName.ToLower().Trim().Contains(MyCalendarForm.SearchTerm.ToLower().Trim())).ToList();
                ptoEntries2.AddRange(temp2);
            }
            else
            {
                var temp = ptoEntries.Where(p => p.CompanyCode == "MEWI" || 
                                                p.EmpNo 
                                                    is "1176" // Jeff Knutson
                                                    or "1086" // Bridget Neitzel
                                                    or "1196" // Howard Boppart
                                                    or "1106" // Roland Koenig
                ).ToList();
                ptoEntries2.AddRange(temp);    
            }

        }


        foreach (var ptoEntry in ptoEntries2.OrderBy(e => e.DisplayName))
        {
            if (ptoEntry.IncludeWeekends)
            {
                var calendarEntry = new AppointmentData()
                {
                    IsAllDay = true,
                    StartTime = ptoEntry.StartDttm,
                    EndTime = ptoEntry.EndDttm
                };

                var hourDiff = (ptoEntry.EndDttm - ptoEntry.StartDttm).TotalHours;
                if (ptoEntry.NormalHoursWork > 40 && hourDiff < 12)
                {
                    calendarEntry.Subject = $"{ptoEntry.DisplayName} ({hourDiff} hours)";
                }
                else if (ptoEntry.NormalHoursWork <= 40 && hourDiff < 8)
                {
                    calendarEntry.Subject = $"{ptoEntry.DisplayName} ({hourDiff} hours)";
                }
                else
                {
                    calendarEntry.Subject = ptoEntry.DisplayName;
                }

                _dataSource.Add(calendarEntry);                
            }
            else
            {
                var chunked = WorkWeekChunker(ptoEntry.StartDttm, ptoEntry.EndDttm);
                foreach (var chunk in chunked)
                {
                    var (startDttm, endDttm) = chunk;
                    var calendarEntry = new AppointmentData()
                    {
                        IsAllDay = true,
                        StartTime = startDttm,
                        EndTime = endDttm,
                        Color = GetColor(ptoEntry.CompanyCode)
                    };

                    var hourDiff = (ptoEntry.EndDttm - ptoEntry.StartDttm).TotalHours;
                    if (ptoEntry.NormalHoursWork > 40 && hourDiff < 12)
                    {
                        calendarEntry.Subject = $"{ptoEntry.DisplayName} ({hourDiff} hours)";
                    }
                    else if (ptoEntry.NormalHoursWork <= 40 && hourDiff < 8)
                    {
                        calendarEntry.Subject = $"{ptoEntry.DisplayName} ({hourDiff} hours)";
                    }
                    else
                    {
                        calendarEntry.Subject = ptoEntry.DisplayName;
                    }

                    _dataSource.Add(calendarEntry);     
                }
            }
        }

        DoneLoading = true;   
    }


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender == true)
        {
            await _jsRuntime.InvokeVoidAsync("setActiveItem", "nav-hr");
        }
    }    

    protected override async Task OnInitializedAsync()
    {
        if(Facility == null)
        {
            NavManager.NavigateTo("/illinois/ptocalendar", forceLoad: true);
        }
        ptoEntries = await _vistaTimeService.GetPtoCalendarEntries();
        CalendarForm ptodata = await LocalStorageService.GetItemAsync<CalendarForm?>(LocalStorageKeys.PTODATA.ToString());

        if(ptodata != null)
        {
            MyCalendarForm = ptodata;
            MyCalendarForm.SearchTerm = ptodata.SearchTerm;
        }
        
        DoFilter();
    }

    private string GetColor(string companyCode)
    {
        var color = companyCode switch {
            "MELC" => "#007bff",
            "MGRA" => "#FF9632",
            _ => "#000"
            };

        return color;
    }


    private List<(DateTime StartDate, DateTime EndDate)> WorkWeekChunker(DateTime startDate, DateTime endDate) 
    {
        var outList = new List<(DateTime, DateTime)>();
        var dateListDictionary = new Dictionary<int, List<DateTime>>();
        var dateIndex = startDate;
        while (dateIndex <= endDate) 
        {
            if (dateIndex.DayOfWeek != DayOfWeek.Saturday && dateIndex.DayOfWeek != DayOfWeek.Sunday)
            {
                var weekNum = System.Globalization.ISOWeek.GetWeekOfYear(dateIndex);
                if (dateListDictionary.ContainsKey(weekNum)) 
                {
                    dateListDictionary[weekNum].Add(dateIndex);
                }
                else
                {
                    dateListDictionary[weekNum] = new List<DateTime>() { dateIndex };
                }
            }
            dateIndex = dateIndex.AddDays(1);
        }
	
        foreach (var weekNum in dateListDictionary.Keys) 
        {
            var minDate = dateListDictionary[weekNum].Min();	
            var maxDate = dateListDictionary[weekNum].Max();
            outList.Add((minDate, maxDate));
        }
		
        return outList;
    }    
    
    public class AppointmentData
    {
        public int Id { get; set; }
        public string Subject { get; set; }
        public string Location { get; set; }
        public DateTime StartTime { get; set; }
        public DateTime EndTime { get; set; }
        public string Description { get; set; }
        public bool IsAllDay { get; set; }
        public string RecurrenceRule { get; set; }
        public string RecurrenceException { get; set; }
        public Nullable<int> RecurrenceID { get; set; }
        public string Color { get; set; }
    }
}
*/
